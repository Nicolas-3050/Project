{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\seill\\\\OneDrive\\\\Documents\\\\web_services\\\\sumatohomu\\\\src\\\\components\\\\Actuators.tsx\",\n    _s = $RefreshSig$();\n\nimport { AddCircle } from \"@mui/icons-material\";\nimport { Button, CircularProgress, Grid, List, Stack, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { Fragment, useContext, useEffect, useState } from \"react\";\nimport AddActuator from \"./dialogs/AddActuator\";\nimport ActuatorListItem from \"./utils/ActuatorListItem\";\nimport { AlertContext } from \"./utils/AlertProvider\";\nimport request from \"../modules/requester\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Actuators = () => {\n  _s();\n\n  const [initialized, setInitialized] = useState(false);\n  const [actuators, setActuators] = useState([]);\n  const [showAddActuator, setShowAddActuator] = useState(false);\n  const {\n    showAlert\n  } = useContext(AlertContext);\n\n  const getActuators = async () => {\n    try {\n      const response = await request.get(\"actuator\");\n      setActuators([...response.data.data]);\n      setInitialized(true);\n    } catch (error) {\n      showAlert(\"error\", error);\n    }\n  };\n\n  const updateActuator = async actuator => {\n    try {\n      await request.patch(`actuator/${actuator.id}`, {\n        state: actuator.state\n      });\n      setActuators([...actuators]);\n    } catch (error) {\n      showAlert(\"error\", error);\n    }\n  };\n\n  const deleteActuator = async actuator => {\n    try {\n      await request.delete(`actuator/${actuator.id}`);\n      setActuators(actuators.filter(value => value.id !== actuator.id));\n    } catch (error) {\n      var _axiosError$response;\n\n      const axiosError = error;\n      showAlert(\"error\", (_axiosError$response = axiosError.response) === null || _axiosError$response === void 0 ? void 0 : _axiosError$response.data);\n    }\n  };\n\n  useEffect(() => {\n    getActuators(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleCheckChange = (actuator, e) => {\n    actuator.state = e.target.checked;\n    updateActuator(actuator);\n  };\n\n  const handleDelete = actuator => {\n    deleteActuator(actuator);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 2,\n    justifyContent: \"center\",\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h3\",\n        align: \"center\",\n        children: \"Actuateurs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), initialized ? /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 8,\n        md: 6,\n        lg: 5,\n        xl: 4,\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          children: [/*#__PURE__*/_jsxDEV(List, {\n            children: actuators.map(actuator => /*#__PURE__*/_jsxDEV(ActuatorListItem, {\n              onCheckChange: handleCheckChange,\n              onDelete: handleDelete,\n              actuator: actuator\n            }, actuator.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            justifyContent: \"center\",\n            display: \"flex\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              sx: {\n                borderRadius: 5\n              },\n              onClick: () => setShowAddActuator(true),\n              children: [/*#__PURE__*/_jsxDEV(AddCircle, {\n                sx: {\n                  marginRight: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 19\n              }, this), \" Ajouter\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AddActuator, {\n        show: showAddActuator,\n        onClose: () => setShowAddActuator(false),\n        onAddedActuator: actuator => setActuators([...actuators, actuator])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      justifyContent: \"center\",\n      display: \"flex\",\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Actuators, \"5xupnMAdrhf77j6bc+of6LZi4A4=\");\n\n_c = Actuators;\nexport default Actuators;\n\nvar _c;\n\n$RefreshReg$(_c, \"Actuators\");","map":{"version":3,"sources":["C:/Users/seill/OneDrive/Documents/web_services/sumatohomu/src/components/Actuators.tsx"],"names":["AddCircle","Button","CircularProgress","Grid","List","Stack","Typography","Box","Fragment","useContext","useEffect","useState","AddActuator","ActuatorListItem","AlertContext","request","Actuators","initialized","setInitialized","actuators","setActuators","showAddActuator","setShowAddActuator","showAlert","getActuators","response","get","data","error","updateActuator","actuator","patch","id","state","deleteActuator","delete","filter","value","axiosError","handleCheckChange","e","target","checked","handleDelete","map","borderRadius","marginRight"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,qBAA1B;AACA,SACEC,MADF,EAEEC,gBAFF,EAGEC,IAHF,EAIEC,IAJF,EAKEC,KALF,EAMEC,UANF,QAOO,eAPP;AAQA,SAASC,GAAT,QAAoB,aAApB;AACA,SAEEC,QAFF,EAIEC,UAJF,EAKEC,SALF,EAMEC,QANF,QAOO,OAPP;AASA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,gBAAP,MAA6B,0BAA7B;AACA,SAASC,YAAT,QAA6B,uBAA7B;AACA,OAAOC,OAAP,MAAoB,sBAApB;;;AAGA,MAAMC,SAA4B,GAAG,MAAM;AAAA;;AACzC,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACU,eAAD,EAAkBC,kBAAlB,IAAwCX,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM;AAAEY,IAAAA;AAAF,MAAgBd,UAAU,CAACK,YAAD,CAAhC;;AACA,QAAMU,YAAY,GAAG,YAAY;AAC/B,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMV,OAAO,CAACW,GAAR,CAAY,UAAZ,CAAvB;AACAN,MAAAA,YAAY,CAAC,CAAC,GAAGK,QAAQ,CAACE,IAAT,CAAcA,IAAlB,CAAD,CAAZ;AACAT,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD,KAJD,CAIE,OAAOU,KAAP,EAAc;AACdL,MAAAA,SAAS,CAAC,OAAD,EAAUK,KAAV,CAAT;AACD;AACF,GARD;;AASA,QAAMC,cAAc,GAAG,MAAOC,QAAP,IAA8B;AACnD,QAAI;AACF,YAAMf,OAAO,CAACgB,KAAR,CAAe,YAAWD,QAAQ,CAACE,EAAG,EAAtC,EAAyC;AAC7CC,QAAAA,KAAK,EAAEH,QAAQ,CAACG;AAD6B,OAAzC,CAAN;AAGAb,MAAAA,YAAY,CAAC,CAAC,GAAGD,SAAJ,CAAD,CAAZ;AACD,KALD,CAKE,OAAOS,KAAP,EAAc;AACdL,MAAAA,SAAS,CAAC,OAAD,EAAUK,KAAV,CAAT;AACD;AACF,GATD;;AAUA,QAAMM,cAAc,GAAG,MAAOJ,QAAP,IAA8B;AACnD,QAAI;AACF,YAAMf,OAAO,CAACoB,MAAR,CAAgB,YAAWL,QAAQ,CAACE,EAAG,EAAvC,CAAN;AACAZ,MAAAA,YAAY,CAACD,SAAS,CAACiB,MAAV,CAAkBC,KAAD,IAAWA,KAAK,CAACL,EAAN,KAAaF,QAAQ,CAACE,EAAlD,CAAD,CAAZ;AACD,KAHD,CAGE,OAAOJ,KAAP,EAAuB;AAAA;;AACvB,YAAMU,UAAU,GAAGV,KAAnB;AACAL,MAAAA,SAAS,CAAC,OAAD,0BAAUe,UAAU,CAACb,QAArB,yDAAU,qBAAqBE,IAA/B,CAAT;AACD;AACF,GARD;;AAUAjB,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,YAAY,GADE,CAEd;AACD,GAHQ,EAGN,EAHM,CAAT;;AAIA,QAAMe,iBAAiB,GAAG,CACxBT,QADwB,EAExBU,CAFwB,KAGrB;AACHV,IAAAA,QAAQ,CAACG,KAAT,GAAiBO,CAAC,CAACC,MAAF,CAASC,OAA1B;AACAb,IAAAA,cAAc,CAACC,QAAD,CAAd;AACD,GAND;;AAOA,QAAMa,YAAY,GAAIb,QAAD,IAAwB;AAC3CI,IAAAA,cAAc,CAACJ,QAAD,CAAd;AACD,GAFD;;AAIA,sBACE,QAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAA4B,IAAA,cAAc,EAAC,QAA3C;AAAA,4BACE,QAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA,6BACE,QAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAyB,QAAA,KAAK,EAAC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,EAMGb,WAAW,gBACV,QAAC,QAAD;AAAA,8BACE,QAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAmB,QAAA,EAAE,EAAE,CAAvB;AAA0B,QAAA,EAAE,EAAE,CAA9B;AAAiC,QAAA,EAAE,EAAE,CAArC;AAAwC,QAAA,EAAE,EAAE,CAA5C;AAAA,+BACE,QAAC,KAAD;AAAA,kCACE,QAAC,IAAD;AAAA,sBACGE,SAAS,CAACyB,GAAV,CAAed,QAAD,iBACb,QAAC,gBAAD;AAEE,cAAA,aAAa,EAAES,iBAFjB;AAGE,cAAA,QAAQ,EAAEI,YAHZ;AAIE,cAAA,QAAQ,EAAEb;AAJZ,eACOA,QAAQ,CAACE,EADhB;AAAA;AAAA;AAAA;AAAA,oBADD;AADH;AAAA;AAAA;AAAA;AAAA,kBADF,eAWE,QAAC,GAAD;AAAK,YAAA,cAAc,EAAE,QAArB;AAA+B,YAAA,OAAO,EAAC,MAAvC;AAAA,mCACE,QAAC,MAAD;AACE,cAAA,KAAK,EAAC,SADR;AAEE,cAAA,EAAE,EAAE;AAAEa,gBAAAA,YAAY,EAAE;AAAhB,eAFN;AAGE,cAAA,OAAO,EAAE,MAAMvB,kBAAkB,CAAC,IAAD,CAHnC;AAAA,sCAKE,QAAC,SAAD;AAAW,gBAAA,EAAE,EAAE;AAAEwB,kBAAAA,WAAW,EAAE;AAAf;AAAf;AAAA;AAAA;AAAA;AAAA,sBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAwBE,QAAC,WAAD;AACE,QAAA,IAAI,EAAEzB,eADR;AAEE,QAAA,OAAO,EAAE,MAAMC,kBAAkB,CAAC,KAAD,CAFnC;AAGE,QAAA,eAAe,EAAGQ,QAAD,IACfV,YAAY,CAAC,CAAC,GAAGD,SAAJ,EAAeW,QAAf,CAAD;AAJhB;AAAA;AAAA;AAAA;AAAA,cAxBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADU,gBAkCV,QAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAmB,MAAA,cAAc,EAAC,QAAlC;AAA2C,MAAA,OAAO,EAAE,MAApD;AAAA,6BACE,QAAC,gBAAD;AAAkB,QAAA,KAAK,EAAC;AAAxB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAxCJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA+CD,CAhGD;;GAAMd,S;;KAAAA,S;AAiGN,eAAeA,SAAf","sourcesContent":["import { AddCircle } from \"@mui/icons-material\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Grid,\r\n  List,\r\n  Stack,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport {\r\n  ChangeEvent,\r\n  Fragment,\r\n  FunctionComponent,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport Actuator from \"../interfaces/Actuator\";\r\nimport AddActuator from \"./dialogs/AddActuator\";\r\nimport ActuatorListItem from \"./utils/ActuatorListItem\";\r\nimport { AlertContext } from \"./utils/AlertProvider\";\r\nimport request from \"../modules/requester\";\r\nimport { AxiosError } from \"axios\";\r\n\r\nconst Actuators: FunctionComponent = () => {\r\n  const [initialized, setInitialized] = useState(false);\r\n  const [actuators, setActuators] = useState([] as Actuator[]);\r\n  const [showAddActuator, setShowAddActuator] = useState(false);\r\n  const { showAlert } = useContext(AlertContext);\r\n  const getActuators = async () => {\r\n    try {\r\n      const response = await request.get(\"actuator\");\r\n      setActuators([...response.data.data]);\r\n      setInitialized(true);\r\n    } catch (error) {\r\n      showAlert(\"error\", error as string);\r\n    }\r\n  };\r\n  const updateActuator = async (actuator: Actuator) => {\r\n    try {\r\n      await request.patch(`actuator/${actuator.id}`, {\r\n        state: actuator.state,\r\n      });\r\n      setActuators([...actuators]);\r\n    } catch (error) {\r\n      showAlert(\"error\", error as string);\r\n    }\r\n  };\r\n  const deleteActuator = async (actuator: Actuator) => {\r\n    try {\r\n      await request.delete(`actuator/${actuator.id}`);\r\n      setActuators(actuators.filter((value) => value.id !== actuator.id));\r\n    } catch (error: unknown) {\r\n      const axiosError = error as AxiosError;\r\n      showAlert(\"error\", axiosError.response?.data);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getActuators();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  const handleCheckChange = (\r\n    actuator: Actuator,\r\n    e: ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    actuator.state = e.target.checked;\r\n    updateActuator(actuator);\r\n  };\r\n  const handleDelete = (actuator: Actuator) => {\r\n    deleteActuator(actuator);\r\n  };\r\n\r\n  return (\r\n    <Grid container spacing={2} justifyContent=\"center\">\r\n      <Grid item xs={12}>\r\n        <Typography variant=\"h3\" align=\"center\">\r\n          Actuateurs\r\n        </Typography>\r\n      </Grid>\r\n      {initialized ? (\r\n        <Fragment>\r\n          <Grid item xs={12} sm={8} md={6} lg={5} xl={4}>\r\n            <Stack>\r\n              <List>\r\n                {actuators.map((actuator) => (\r\n                  <ActuatorListItem\r\n                    key={actuator.id}\r\n                    onCheckChange={handleCheckChange}\r\n                    onDelete={handleDelete}\r\n                    actuator={actuator}\r\n                  />\r\n                ))}\r\n              </List>\r\n              <Box justifyContent={\"center\"} display=\"flex\">\r\n                <Button\r\n                  color=\"primary\"\r\n                  sx={{ borderRadius: 5 }}\r\n                  onClick={() => setShowAddActuator(true)}\r\n                >\r\n                  <AddCircle sx={{ marginRight: 1 }} /> Ajouter\r\n                </Button>\r\n              </Box>\r\n            </Stack>\r\n          </Grid>\r\n          <AddActuator\r\n            show={showAddActuator}\r\n            onClose={() => setShowAddActuator(false)}\r\n            onAddedActuator={(actuator) =>\r\n              setActuators([...actuators, actuator])\r\n            }\r\n          />\r\n        </Fragment>\r\n      ) : (\r\n        <Grid item xs={12} justifyContent=\"center\" display={\"flex\"}>\r\n          <CircularProgress color=\"secondary\" />\r\n        </Grid>\r\n      )}\r\n    </Grid>\r\n  );\r\n};\r\nexport default Actuators;\r\n"]},"metadata":{},"sourceType":"module"}